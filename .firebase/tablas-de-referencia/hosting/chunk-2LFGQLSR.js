import{a as H,b as $}from"./chunk-7RAINC4N.js";import{a as F,b as d,c as I,d as D,g as k,h as N,i as T,j as V,k as j,l as G,m as q,q as L,r as B,t as R}from"./chunk-OQWTK6WD.js";import"./chunk-VDXRCH7B.js";import{B as a,D as S,E as w,I as p,L as m,M as f,N as t,O as e,P as s,R as E,S as g,U as i,W as u,a as _,b as M,e as A,ga as y,ha as P,oa as O,v as c,w as x}from"./chunk-CPJZ35ZK.js";var h=A(H());function Y(l,r){if(l&1&&(t(0,"div",13)(1,"span",48),c(),t(2,"svg",49),s(3,"path",50),e(),i(4),e()()),l&2){let n=g();a(4),u(" ",n.getErrorMessage("identifycation")," ")}}function J(l,r){if(l&1&&(t(0,"div",13)(1,"span",48),c(),t(2,"svg",49),s(3,"path",50),e(),i(4),e()()),l&2){let n=g();a(4),u(" ",n.getErrorMessage("fullName")," ")}}function K(l,r){if(l&1&&(t(0,"div",13)(1,"span",48),c(),t(2,"svg",49),s(3,"path",50),e(),i(4),e()()),l&2){let n=g();a(4),u(" ",n.getErrorMessage("email")," ")}}function Q(l,r){if(l&1&&(t(0,"div",13)(1,"span",48),c(),t(2,"svg",49),s(3,"path",50),e(),i(4),e()()),l&2){let n=g();a(4),u(" ",n.getErrorMessage("area")," ")}}function U(l,r){if(l&1&&(t(0,"div",13)(1,"span",48),c(),t(2,"svg",49),s(3,"path",50),e(),i(4),e()()),l&2){let n=g();a(4),u(" ",n.getErrorMessage("date")," ")}}function W(l,r){if(l&1&&(t(0,"div",13)(1,"span",48),c(),t(2,"svg",49),s(3,"path",50),e(),i(4),e()()),l&2){let n=g();a(4),u(" ",n.getErrorMessage("typeDescription")," ")}}function X(l,r){if(l&1&&(t(0,"span",48),c(),t(1,"svg",49),s(2,"path",50),e(),i(3),e()),l&2){let n=g();a(3),u(" ",n.getErrorMessage("description")," ")}}function Z(l,r){l&1&&(t(0,"div",51),c(),t(1,"svg",52),s(2,"path",53),e(),x(),t(3,"div")(4,"h3",39),i(5,"\xA1Hay errores en el formulario!"),e(),t(6,"div",40),i(7,"Por favor, revise los campos marcados en rojo y corrija los errores antes de continuar."),e()()())}function ee(l,r){l&1&&(c(),t(0,"svg",44),s(1,"path",54),e())}var b=class l{constructor(r,n){this.fb=r;this.solicitudesService=n;this.form=this.fb.group({fullName:["",[d.required,d.minLength(3)]],email:["",[d.required,d.email]],identifycation:["",[d.required,d.minLength(5),d.pattern("^[0-9]+$")]],area:["",[d.required,d.minLength(2)]],date:["",[d.required]],typeDescription:["",[d.required]],description:["",[d.required,d.minLength(5),d.maxLength(500)]]})}form;enviando=!1;showFormErrors=!1;ngOnInit(){this.form.patchValue({date:new Date().toISOString().split("T")[0]})}isFieldInvalid(r){let n=this.form.get(r);return!!(n&&n.invalid&&(n.dirty||n.touched||this.showFormErrors))}isFieldValid(r){let n=this.form.get(r);return!!(n&&n.valid&&(n.dirty||n.touched))}getErrorMessage(r){let n=this.form.get(r);if(!n||!n.errors)return"";let o=n.errors,v={fullName:"Nombre completo",email:"Correo electr\xF3nico",identifycation:"N\xFAmero de identificaci\xF3n",area:"\xC1rea de trabajo",date:"Fecha",typeDescription:"Tipo de solicitud",description:"Descripci\xF3n"}[r]||r;if(o.required)return`${v} es requerido`;if(o.email)return"Ingrese un correo electr\xF3nico v\xE1lido";if(o.minlength){let C=o.minlength.requiredLength;return`${v} debe tener al menos ${C} caracteres`}if(o.maxlength){let C=o.maxlength.requiredLength;return`${v} no puede tener m\xE1s de ${C} caracteres`}return o.pattern?r==="identifycation"?"Solo se permiten n\xFAmeros en la identificaci\xF3n":`${v} tiene un formato inv\xE1lido`:`${v} es inv\xE1lido`}getCharacterCount(){return(this.form.get("description")?.value||"").length}marcarCamposComoTouched(){Object.values(this.form.controls).forEach(r=>{r.markAsTouched()})}getTypeDescriptionText(r){return{1:"\u{1F527} Solicitud de Mantenimiento",2:"\u{1F4CB} Solicitud de Reclamo",3:"\u2753 Solicitud de Consulta"}[r]||r}onSubmit(){if(this.showFormErrors=!0,this.form.valid&&!this.enviando){this.enviando=!0;let r=M(_({},this.form.value),{typeDescription:this.getTypeDescriptionText(this.form.value.typeDescription)});this.solicitudesService.crearSolicitud(r).subscribe({next:n=>{this.showFormErrors=!1,h.default.fire({icon:"success",title:"\xA1\xC9xito!",html:`
              <p>Solicitud enviada correctamente</p>
              <div class="text-left mt-4">
                <p class="font-semibold">Respuesta generada autom\xE1ticamente:</p>
                <p class="mt-2">${n.respuesta}</p>
                <p class="mt-4 text-sm italic">${n.mensaje}</p>
              </div>
            `,confirmButtonText:"Aceptar",timerProgressBar:!0}),this.form.reset(),this.form.patchValue({date:new Date().toISOString().split("T")[0]})},error:n=>{h.default.fire({icon:"error",title:"Error al enviar",text:"No se pudo enviar la solicitud. Por favor intenta nuevamente.",confirmButtonText:"Aceptar"}),console.error("Error al enviar solicitud:",n)},complete:()=>{this.enviando=!1}})}else{this.marcarCamposComoTouched();let r=Object.keys(this.form.controls).filter(n=>this.form.get(n)?.invalid).map(n=>({fullName:"Nombre completo",email:"Correo electr\xF3nico",identifycation:"N\xFAmero de identificaci\xF3n",area:"\xC1rea de trabajo",date:"Fecha",typeDescription:"Tipo de solicitud",description:"Descripci\xF3n"})[n]||n);h.default.fire({icon:"warning",title:"\xA1Formulario incompleto!",html:`
          <p>Por favor, complete los siguientes campos:</p>
          <ul class="text-left mt-3 list-disc list-inside">
            ${r.map(n=>`<li>${n}</li>`).join("")}
          </ul>
        `,confirmButtonText:"Revisar formulario",confirmButtonColor:"#ef4444"}),this.scrollToFirstError()}}scrollToFirstError(){setTimeout(()=>{let r=document.querySelector(".input-error, .select-error, .textarea-error");r&&r.scrollIntoView({behavior:"smooth",block:"center"})},100)}limpiarFormulario(){this.form.reset(),this.showFormErrors=!1,this.form.patchValue({date:new Date().toISOString().split("T")[0]})}static \u0275fac=function(n){return new(n||l)(S(B),S($))};static \u0275cmp=w({type:l,selectors:[["app-solicitudes"]],decls:113,vars:43,consts:[[1,"min-h-screen","bg-base-200","py-8","px-4"],[1,"max-w-4xl","mx-auto"],[1,"text-center","mb-8"],[1,"text-4xl","font-bold","text-base-content","mb-2"],[1,"text-base-content/70"],[1,"card","bg-base-100","shadow-xl"],[1,"card-body"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"flex","items-center","gap-3","mb-6"],[1,"badge","badge-primary","badge-lg"],[1,"text-2xl","font-semibold","text-base-content"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"form-control","w-full"],[1,"label"],[1,"label-text","font-medium"],[1,"text-error"],["type","number","placeholder","Ej: 1234567890","id","identifycation","formControlName","identifycation",1,"input","input-bordered","w-full","focus:input-primary"],["class","label",4,"ngIf"],["type","text","placeholder","Ingrese su nombre completo","id","fullName","formControlName","fullName",1,"input","input-bordered","w-full","focus:input-primary"],["type","email","placeholder","ejemplo@correo.com","id","email","formControlName","email",1,"input","input-bordered","w-full","focus:input-primary"],["type","text","placeholder","Ej: Recursos Humanos, IT, Contabilidad","id","area","formControlName","area",1,"input","input-bordered","w-full","focus:input-primary"],[1,"form-control","w-full","max-w-md","mt-6"],["type","date","id","date","formControlName","date",1,"input","input-bordered","w-full","focus:input-primary"],[1,"divider","divider-primary"],[1,"badge","badge-primary","badge-outline"],[1,"badge","badge-secondary","badge-lg"],[1,"form-control","w-full","max-w-md","mb-6"],["id","typeDescription","formControlName","typeDescription",1,"select","select-bordered","w-full","focus:select-primary"],["disabled","","selected",""],["value","1"],["value","2"],["value","3"],[1,"label-text-alt"],["placeholder","Describa detalladamente su solicitud. Incluya toda la informaci\xF3n relevante que pueda ayudar a procesar su petici\xF3n de manera eficiente...","id","description","formControlName","description","maxlength","500",1,"textarea","textarea-bordered","h-32","resize-none","focus:textarea-primary"],["class","label-text-alt text-error flex items-center gap-1",4,"ngIf"],["class","alert alert-error",4,"ngIf"],[1,"alert","alert-info"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"font-bold"],[1,"text-xs"],[1,"card-actions","justify-end","pt-4"],[1,"flex","flex-col","sm:flex-row","gap-4","w-full","sm:w-auto"],["type","button","routerLink","/home",1,"btn","btn-ghost","btn-lg","flex-1","sm:flex-none","order-2","sm:order-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 19l-7-7m0 0l7-7m-7 7h18"],["type","submit",1,"btn","btn-primary","btn-lg","flex-1","sm:flex-none","order-1","sm:order-2",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],[1,"label-text-alt","text-error","flex","items-center","gap-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"alert","alert-error"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 19l9 2-9-18-9 18 9-2zm0 0v-8"]],template:function(n,o){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),i(4,"Formulario de Solicitudes"),e(),t(5,"p",4),i(6,"Complete la informaci\xF3n requerida para procesar su solicitud"),e()(),t(7,"div",5)(8,"div",6)(9,"form",7),E("ngSubmit",function(){return o.onSubmit()}),t(10,"div")(11,"div",8)(12,"div",9),i(13,"1"),e(),t(14,"h2",10),i(15,"Informaci\xF3n Personal"),e()(),t(16,"div",11)(17,"div",12)(18,"label",13)(19,"span",14)(20,"span",15),i(21,"*"),e(),i(22," N\xFAmero de Identificaci\xF3n "),e()(),s(23,"input",16),p(24,Y,5,1,"div",17),e(),t(25,"div",12)(26,"label",13)(27,"span",14)(28,"span",15),i(29,"*"),e(),i(30," Nombre Completo "),e()(),s(31,"input",18),p(32,J,5,1,"div",17),e(),t(33,"div",12)(34,"label",13)(35,"span",14)(36,"span",15),i(37,"*"),e(),i(38," Correo Electr\xF3nico "),e()(),s(39,"input",19),p(40,K,5,1,"div",17),e(),t(41,"div",12)(42,"label",13)(43,"span",14)(44,"span",15),i(45,"*"),e(),i(46," \xC1rea de Trabajo "),e()(),s(47,"input",20),p(48,Q,5,1,"div",17),e()(),t(49,"div",21)(50,"label",13)(51,"span",14)(52,"span",15),i(53,"*"),e(),i(54," Fecha de Solicitud "),e()(),s(55,"input",22),p(56,U,5,1,"div",17),e()(),t(57,"div",23)(58,"div",24),i(59,"Detalles de la Solicitud"),e()(),t(60,"div")(61,"div",8)(62,"div",25),i(63,"2"),e(),t(64,"h2",10),i(65,"Detalles de la Solicitud"),e()(),t(66,"div",26)(67,"label",13)(68,"span",14)(69,"span",15),i(70,"*"),e(),i(71," Tipo de Solicitud "),e()(),t(72,"select",27)(73,"option",28),i(74,"Seleccione el tipo de solicitud"),e(),t(75,"option",29),i(76,"\u{1F527} Solicitud de Mantenimiento"),e(),t(77,"option",30),i(78,"\u{1F4CB} Solicitud de Reclamo"),e(),t(79,"option",31),i(80,"\u2753 Solicitud de Consulta"),e()(),p(81,W,5,1,"div",17),e(),t(82,"div",12)(83,"label",13)(84,"span",14)(85,"span",15),i(86,"*"),e(),i(87," Descripci\xF3n de la Solicitud "),e(),t(88,"span",32),i(89,"M\xE1ximo 500 caracteres"),e()(),s(90,"textarea",33),t(91,"div",13),p(92,X,4,1,"span",34),t(93,"span",32),i(94),e()()()(),p(95,Z,8,0,"div",35),t(96,"div",36),c(),t(97,"svg",37),s(98,"path",38),e(),x(),t(99,"div")(100,"h3",39),i(101,"Informaci\xF3n importante"),e(),t(102,"div",40),i(103,"Los campos marcados con (*) son obligatorios. Su solicitud ser\xE1 procesada en un plazo m\xE1ximo de 3 d\xEDas h\xE1biles."),e()()(),t(104,"div",41)(105,"div",42)(106,"button",43),c(),t(107,"svg",44),s(108,"path",45),e(),i(109," Volver al Inicio "),e(),x(),t(110,"button",46),p(111,ee,2,0,"svg",47),i(112),e()()()()()()()()),n&2&&(a(9),m("formGroup",o.form),a(14),f("input-error",o.isFieldInvalid("identifycation"))("input-success",o.isFieldValid("identifycation")),a(),m("ngIf",o.isFieldInvalid("identifycation")),a(7),f("input-error",o.isFieldInvalid("fullName"))("input-success",o.isFieldValid("fullName")),a(),m("ngIf",o.isFieldInvalid("fullName")),a(7),f("input-error",o.isFieldInvalid("email"))("input-success",o.isFieldValid("email")),a(),m("ngIf",o.isFieldInvalid("email")),a(7),f("input-error",o.isFieldInvalid("area"))("input-success",o.isFieldValid("area")),a(),m("ngIf",o.isFieldInvalid("area")),a(7),f("input-error",o.isFieldInvalid("date"))("input-success",o.isFieldValid("date")),a(),m("ngIf",o.isFieldInvalid("date")),a(16),f("select-error",o.isFieldInvalid("typeDescription"))("select-success",o.isFieldValid("typeDescription")),a(9),m("ngIf",o.isFieldInvalid("typeDescription")),a(9),f("textarea-error",o.isFieldInvalid("description"))("textarea-success",o.isFieldValid("description")),a(2),m("ngIf",o.isFieldInvalid("description")),a(2),u("",o.getCharacterCount(),"/500 caracteres"),a(),m("ngIf",o.showFormErrors&&!o.form.valid),a(15),f("loading",o.enviando),m("disabled",o.enviando),a(),m("ngIf",!o.enviando),a(),u(" ",o.enviando?"Enviando...":"Enviar Solicitud"," "))},dependencies:[R,k,G,q,F,N,j,I,D,L,T,V,O,P,y],styles:['.input-error[_ngcontent-%COMP%], .select-error[_ngcontent-%COMP%], .textarea-error[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .3s ease-in-out;border-color:#ef4444!important;box-shadow:0 0 0 2px #ef444433!important}.input-success[_ngcontent-%COMP%], .select-success[_ngcontent-%COMP%], .textarea-success[_ngcontent-%COMP%]{border-color:#10b981!important;box-shadow:0 0 0 2px #10b98133!important}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.label-text-alt.text-error[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .3s ease-out;font-weight:500}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.input-success[_ngcontent-%COMP%]:hover, .select-success[_ngcontent-%COMP%]:hover, .textarea-success[_ngcontent-%COMP%]:hover{box-shadow:0 0 0 3px #10b9814d!important}.input-error[_ngcontent-%COMP%]:hover, .select-error[_ngcontent-%COMP%]:hover, .textarea-error[_ngcontent-%COMP%]:hover{box-shadow:0 0 0 3px #ef44444d!important}.alert-error[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .4s ease-out;border-left:4px solid #ef4444}.label-text[_ngcontent-%COMP%]   .text-error[_ngcontent-%COMP%]{font-size:1.1em;font-weight:700}.input[_ngcontent-%COMP%], .select[_ngcontent-%COMP%], .textarea[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.input[_ngcontent-%COMP%]:focus, .select[_ngcontent-%COMP%]:focus, .textarea[_ngcontent-%COMP%]:focus{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a!important}.label-text-alt[_ngcontent-%COMP%]{font-weight:500;transition:color .2s ease-in-out}.character-count-warning[_ngcontent-%COMP%]{color:#f59e0b!important;font-weight:600}.character-count-danger[_ngcontent-%COMP%]{color:#ef4444!important;font-weight:600}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn.loading[_ngcontent-%COMP%]{pointer-events:none}.btn.loading[_ngcontent-%COMP%]:before{content:"";width:20px;height:20px;margin-right:8px;border:2px solid transparent;border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.form-control[_ngcontent-%COMP%]:has(.input-error)   .label-text[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]:has(.select-error)   .label-text[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]:has(.textarea-error)   .label-text[_ngcontent-%COMP%]{color:#ef4444;font-weight:600}.label-text-alt.text-error[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}@media (max-width: 640px){.shake[_ngcontent-%COMP%]{animation:shakeMobile .3s ease-in-out}@keyframes shakeMobile{0%,to{transform:translate(0)}25%{transform:translate(-3px)}75%{transform:translate(3px)}}}.field-validating[_ngcontent-%COMP%]{border-color:#3b82f6!important;box-shadow:0 0 0 2px #3b82f633!important}.divider-primary[_ngcontent-%COMP%]{margin:2rem 0}.divider-primary[_ngcontent-%COMP%]:before, .divider-primary[_ngcontent-%COMP%]:after{background:linear-gradient(90deg,transparent,#3b82f6,transparent);height:2px}.alert-info[_ngcontent-%COMP%]{border-left:4px solid #3b82f6}.form-section[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0000001a;transition:all .3s ease}.input-success[_ngcontent-%COMP%]:after, .select-success[_ngcontent-%COMP%]:after, .textarea-success[_ngcontent-%COMP%]:after{content:"\\2713";position:absolute;right:12px;top:50%;transform:translateY(-50%);color:#10b981;font-weight:700;font-size:18px;pointer-events:none}.form-control[_ngcontent-%COMP%]{position:relative}.form-sending[_ngcontent-%COMP%]{pointer-events:none;opacity:.8}.form-sending[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%], .form-sending[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%], .form-sending[_ngcontent-%COMP%]   .textarea[_ngcontent-%COMP%]{background-color:#f3f4f6}.badge-lg[_ngcontent-%COMP%]{font-weight:600;letter-spacing:.5px}.input[_ngcontent-%COMP%]:focus-within, .select[_ngcontent-%COMP%]:focus-within, .textarea[_ngcontent-%COMP%]:focus-within{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}'],changeDetection:0})};var ge=[{path:"",component:b}];export{ge as routes};
